include material.dat

// Test script
{
  name = test_mesh
  type = MESH_PARAMS

  bunch_slice_segments = 1
  bunch_slice_segments = 1
  bunch_slice_falling = 20

  mesh_type = MESH_BUNCH
}

{
  name = test_material
  type = MATERIAL_PARAMS
  transparent = 1
}

{
  name = test_texture
  type = TEXTURE_PARAMS

  texture_alpha = 1
  texture_size_x = 512
  texture_size_y = 512

//  heightmap_dist = 0.1
  heightmap_dist = 0.05

  background_color_r = 255
  background_color_g = 255
  background_color_b = 255
  background_color_a = 0
}

{
  name = rect
  type = TEXTURE_MODIFICATOR_PATTERN_RECTANGLE
  modificator_slave = earth_pixel_point
//  modificator_master = 1
}


{
  name = rect
  type = TEXTURE_MODIFICATOR_PATTERN_RECTANGLE
  modificator_slave = grass_pixel_point
//  modificator_master = 1
//  pixel_color_density = 0.01
}


{
  name = rect2
  type = TEXTURE_MODIFICATOR_PATTERN_MID_POINT
  modificator_slave = grass_pixel_point
//  modificator_slave = test_pixel_point
//  modificator_slave = rock_pixel_point
//  modificator_master = 1

//  generator_hurst = 0.1
  generator_hurst = 0.2

  height_range_min  = 0.5
  height_range_max  = 1

  height_center = 1.0
  height_border = 0.0
  
  {
    type = TEXTURE_MODIFICATOR_COORDINATES

    start_x = 100
    start_y = 100

    size_x = 128
    size_y = 128
  }
  
  light_phong = 1
  light_position_y = 1
  light_color_specular_active = 0
  light_shadow = 1
}

/*
{
  name = line_leaf
  type = TEXTURE_MODIFICATOR_PATTERN_LINE
  modificator_slave = grass_pixel_point
}
*/

/*
{
  name = line2
  type = TEXTURE_MODIFICATOR_PATTERN_LINE
  modificator_slave = test_pixel_point
  
  modificator_master = 1
}
*/

{
  name = line_grass
  modificator_slave = grass_pixel_point
  type = TEXTURE_MODIFICATOR_PATTERN_LINE
  pixel_size = 2
}

{
  name = line_leaf
  type = TEXTURE_MODIFICATOR_PATTERN_LINE_LEAF
  modificator_slave = line_grass
  modificator_master = 1

  coordinates_random = 1
  coordinates_random_num = 5

  {
    type = TEXTURE_MODIFICATOR_COORDINATES

    index = 0

    start_x = 250
    start_y = 0

    size_r = 45
    size_l = 100
  }

  {
    type = TEXTURE_MODIFICATOR_COORDINATES

    index = 1

    start_x = 260
    start_y = 0

    size_r = 135
    size_l = 300
  }
}

{
  name = line_net
  type = TEXTURE_MODIFICATOR_PATTERN_NET
//  modificator_slave = line2
  modificator_slave = grass_pixel_point
//  modificator_master = 1
}

{
  name = line1
//  type = TEXTURE_MODIFICATOR_PATTERN_LINE_LEAF
  type = TEXTURE_MODIFICATOR_PATTERN_LINE_LEAF
//  modificator_slave = line_leaf
  modificator_slave = line_net
  
//  light_phong = 1
  light_position_x = 1
  light_position_y = 1
  light_position_z = 0
//  light_color_specular_active = 0
//  light_shadow = 1
//  light_shadow_size = 10

// pixel_size = 10

//  coordinates_random = 1
//  coordinates_random_num = 10


  {
    type = TEXTURE_MODIFICATOR_COORDINATES 

    index = 0

    start_x = 10
    start_y = 10

    size_x = 100
    size_y = 100
  }

  {
    type = TEXTURE_MODIFICATOR_COORDINATES

    index = 1

    start_x = 255
    start_y = 255

    size_x = 200
    size_y = 200
  }

//  modificator_master = 1
}

{
  name = rect3
  type = TEXTURE_MODIFICATOR_PATTERN_RECTANGLE
  modificator_slave = rock_pixel_point
//  modificator_master = 1
}

// Launch the whole generator thing
{
  type = GENERATOR
/*
  mesh = test_mesh
  material = test_material
  texture = test_texture
*/
  texture_modificator = rect3
}
