// Target pixels dust pixel points
{
  name = background_point
  type = MODIFICATOR_POINT_SINGLE

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_SINGLE_COLOR

    color_min = 765648
    color_max = 765648

    color_delta_parameter = PARAM_PREV_0
  }

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_SINGLE_HEIGHT

    height_center = 0
    height_delta = 1
    
    height_parameter = PARAM_PREV_0
  }
}

// Target pixels dust pixel points
{
  name = background_pixel_fill
  type = MODIFICATOR_POINT_SINGLE

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_SINGLE_COLOR

    color_min = 0
    color_max = 0
  }
}

// shape
{
  name = background_mask
  type = MODIFICATOR_MASK
}

{
  name = background_fractal
  type = MODIFICATOR_PERLIN
//  perlin_persistence = 1
  perlin_persistence = 0.5
  modificator_slave = background_point
}

// Shadow
{
  name = background_point_shadow
  type = MODIFICATOR_POINT_SINGLE

  {
    type = MODIFICATOR_POINT_SINGLE_COLOR

    color_min = 0
    color_max = ffffff

    color_delta_parameter = PARAM_PREV_0
    final_operation = MODULATE
  }
}

// shape
{
  name = background_shape_bunch
  type = MODIFICATOR_BUNCH
  border = 0
  
  coordinates_operation = ADD
  {
    type = MODIFICATOR_COORDINATE
    size_x = 110
    size_y = 110
  }
  modificator_slave = background_point_shadow    
  modificator_slave = background_mask
}

// shape
{
  name = background_shape
  type = MODIFICATOR_RECT
  pixel_step = 100
  mask_create = background_mask
  modificator_slave = background_shape_bunch
}

// shape
{
  name = background_fill
  type = MODIFICATOR_RECT
  mask_inverted = background_mask
  modificator_slave = background_pixel_fill
}

// light
{
  name = background_light
  type = MODIFICATOR_LIGHT
}

// Mesh generator
{
  name = forest_generator
  type = GENERATOR_MESH

//  modificator = background_fractal
//  modificator_target = TEXTURE

//  modificator = background_shape
//  modificator_target = TEXTURE

//  modificator = background_light
//  modificator_target = TEXTURE

//  modificator = background_fill
//  modificator_target = TEXTURE
}

{
  name = generator_launcher
  type = GENERATOR_LAUNCHER

  generator_mesh = forest_generator
}
