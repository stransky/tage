// Target pixels dust pixel points
{
  name = dirt_pixel_point
  type = MODIFICATOR_POINT_SINGLE

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_OPBOX

    color_center = #b29681

    color_delta.r = rgb(50)
    color_delta.g = rgb(50)
    color_delta.b = rgb(50)

    pixel_color_final = color_center*0.6 + color_delta*PARAM_PREV_0
  }
  // Added dust noise (from random generator)
  {
    type = MODIFICATOR_POINT_OPBOX

    color_center = #b29681

    color_delta.r = rgb(50)
    color_delta.g = rgb(50)
    color_delta.b = rgb(50)

    pixel_color_final = pixel_color_final * (color_center + color_delta*PARAM_RAND)
  }
}

{
  name = dirt_field
  type = MODIFICATOR_FRACTAL
  modificator_slave = dirt_pixel_point
  fractal_hurst = 0.1
}

// Copy pixel color from AUX target to texture
// by MODIFICATOR_TARGET modificator
{
  name = from_pixel_point
  type = MODIFICATOR_POINT_SINGLE

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_OPBOX
    pixel_color_final.r = PARAM_PREV_0
    pixel_color_final.g = PARAM_PREV_1
    pixel_color_final.b = PARAM_PREV_2
    pixel_color_final.a = PARAM_PREV_3
  }
}

{
  name = copy_from_target
  type = MODIFICATOR_TARGET
  target_name = target_helper
  modificator_slave = from_pixel_point
}

// Mesh generator
{
  name = forest_generator
  type = GENERATOR_MESH

  // Generate pattern to "target_helper" AUX target
  modificator = dirt_field
  modificator_target = AUX
  modificator_target_name = target_helper

  // Copy colors from target_helper to final texture
  modificator = copy_from_target
  modificator_target = TEXTURE
}

{
  name = target_helper
  type = AUX_PARAMETERS
}

{
  name = generator_launcher
  type = GENERATOR_LAUNCHER

  generator_mesh = forest_generator
}
