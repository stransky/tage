// Target pixels dust pixel points
{
  name = dirt_pixel_point
  type = MODIFICATOR_POINT_SINGLE

  // Base dust background (from fractal generator)
  {
    type = MODIFICATOR_POINT_OPBOX

    color_center = #b29681

    color_delta.r = rgb(50)
    color_delta.g = rgb(50)
    color_delta.b = rgb(50)

    pixel_color_final = color_center + color_delta*PARAM_PREV_0
  }

  // Added dust noise (from random generator)
  {
    type = MODIFICATOR_POINT_OPBOX

    color_center = #b29681

    color_delta.r = rgb(50)
    color_delta.g = rgb(50)
    color_delta.b = rgb(50)

    pixel_color_final = pixel_color_final * (color_center + color_delta*PARAM_RAND)
  }
}

{
  name = dirt_field
  type = MODIFICATOR_FRACTAL
  modificator_slave = dirt_pixel_point
  fractal_hurst = 0.1
}

// Target pixels dist pixel points
{
  name = dirt_pixel_height
  type = MODIFICATOR_POINT_SINGLE

  // Added dust height (from fractal generator)
  {
    type = MODIFICATOR_POINT_OPBOX

    height_center = 0
    height_delta = 0.15

    pixel_height_final = pixel_height_final + height_center + height_delta*PARAM_PREV_0
  }
}

{
  name = dirt_field_height
  type = MODIFICATOR_FRACTAL
  modificator_slave = dirt_pixel_height
  fractal_hurst = 0.3
}

// Target pixels dist pixel points
{
  name = crack_pixel_height
  type = MODIFICATOR_POINT_SINGLE
  {
    type = MODIFICATOR_POINT_OPBOX

    height_center = 0.001
    height_delta =  0

    pixel_height_final = pixel_height_final - height_center + height_delta*PARAM_RAND
  }
}

{
  name = crack_background
  type = MODIFICATOR_LINE

  modificator_slave = crack_pixel_height

  coordinates_random = 1
  coordinates_random_num = 50000

  {
    type = MODIFICATOR_COORDINATE

    index = 0

    start.x = 0
    start.y = 0

    size.r = 0
    size.l = 5
  }

  {
    type = MODIFICATOR_COORDINATE

    index = 1

    start.x = 512
    start.y = 512

    size.r = 180
    size.l = 10
  }
}

{
  name = land_light
  type = MODIFICATOR_LIGHT

  light_position.x =-1
  light_position.y = 1
  light_position.z =-1
}

// Mesh generator
{
  name = forest_generator
  type = GENERATOR_MESH

  modificator = dirt_field
  modificator_target = TEXTURE

  modificator = dirt_field_height
  modificator_target = TEXTURE

  modificator = crack_background
  modificator_target = TEXTURE

  modificator = land_light
  modificator_target = TEXTURE
}

{
  name = generator_launcher
  type = GENERATOR_LAUNCHER

  generator_mesh = forest_generator
}
